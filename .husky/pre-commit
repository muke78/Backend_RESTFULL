#!/bin/sh

echo "ğŸ” Verificando archivos antes del commit..."

# Ejecutar pruebas con yarn
echo "ğŸ§ª Ejecutando tests..."
if ! yarn test; then
  echo "âŒ Tests fallaron. Corrige los errores antes de hacer commit."
  exit 1
fi

# Formatear cÃ³digo con Prettier
echo "ğŸš€ Ejecutando Prettier..."
if ! yarn run prettier --write .; then
  echo "âŒ Error al ejecutar Prettier."
  exit 1
fi

# Agregar los archivos modificados despuÃ©s del formateo
git add .

# Verificar que el cÃ³digo estÃ© actualizado antes del push
echo "ğŸ”„ Verificando que tu cÃ³digo estÃ© actualizado..."
if ! git pull; then
  echo "âŒ Error al actualizar el cÃ³digo. Revisa los conflictos."
  exit 1
fi

echo "âœ… Todo listo para el commit. ğŸ‰"
